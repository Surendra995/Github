pipeline {
   agent any
   stages {
       stage('Build Code') {
           steps {
               sh "mvn clean package"
               echo "Building Artifact"
               """
           }
       }

     stage('Verify BranchCode') 
     {
      when 
      {
      branch 'stage'
      }
      steps {
               sh """
               echo "Only for stage branch"
               """
           }
       }

      stage('Deploy Code') {
          When {
                branch 'master'
             }
          steps {
             
               sh "mvn tomcat7:deploy"
               echo "Deploying Code"
               """
          }
      }
   }
}
